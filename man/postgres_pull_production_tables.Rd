% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/postgres_connect.R
\name{postgres_pull_production_tables}
\alias{postgres_pull_production_tables}
\title{Pull production tables from a remote PostgreSQL database via SSH}
\usage{
postgres_pull_production_tables(
  table = NULL,
  local_con = NULL,
  ssh_key_path = NULL,
  local_password = NULL,
  load_in_memory = FALSE,
  local_password_is_product = FALSE,
  load_functions_to_db = TRUE,
  preset_ssh_key = "",
  available_tables = c(),
  chunk_size = 10000,
  verbose = FALSE
)
}
\arguments{
\item{table}{A single fully qualified table name (e.g., \code{"schema.table"}) to retrieve from the remote database.
If \code{NULL}, no data is loaded and only the decrypted credentials are returned.}

\item{local_con}{A live DBI connection to the local target database. Must be provided if \code{load_in_memory = FALSE}.}

\item{ssh_key_path}{File path to the private SSH key used to connect to the production environment. If \code{NULL}, a default path is assumed.}

\item{local_password}{Optional password for the local database. If \code{local_password_is_product = TRUE}, this must already be decrypted.}

\item{load_in_memory}{Logical. If \code{TRUE}, data is kept in memory (e.g. for testing or lightweight workflows). Not yet implemented.}

\item{local_password_is_product}{Logical. If \code{TRUE}, \code{local_password} is assumed to already contain the decrypted key.}

\item{load_functions_to_db}{Logical. If \code{TRUE} (default), all PostgreSQL functions from the remote DB are imported into the local DB.}

\item{preset_ssh_key}{Optional string name to select from preconfigured SSH key paths (e.g. \code{"ci"}).}

\item{available_tables}{Character vector of all known tables (optional). Used to assist metadata writing.}

\item{chunk_size}{Integer. Number of rows to process at once when downloading the table. Default is \code{10000}.}
}
\value{
Returns the decrypted production credentials invisibly (as a named list), e.g., for further use.
}
\description{
This internal utility function connects to the production environment via SSH, retrieves the specified table
from a PostgreSQL database, and stores it either in a local PostgreSQL database or an in-memory SQLite database.
It also loads metadata (like view definitions and SQL functions) if configured.
}
\details{
This function automatically checks whether the requested object is a table or a view. If it's a view,
the corresponding view definition is retrieved and stored in the local DB.
If it's a table, the data is copied along with its metadata (like column types and keys).

SSH and PostgreSQL sessions are automatically closed after the function completes.
}
\keyword{internal}
