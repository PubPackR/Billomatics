% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/postgres_connect.R
\name{postgres_connect}
\alias{postgres_connect}
\title{Connect to Local PostgreSQL Database with Optional Table Synchronization}
\usage{
postgres_connect(
  postgres_keys = NULL,
  ssl_cert_path = "../../metabase-data/postgres/eu-central-1-bundle.pem",
  needed_tables = NULL,
  con = NULL,
  update_local_tables = FALSE,
  ssh_key_path = NULL,
  local_dbname = "studyflix_local",
  local_host = "localhost",
  local_port = 5432,
  local_user = "postgres",
  local_pw = NULL,
  load_in_memory = FALSE,
  local_password_is_product = FALSE,
  chunk_size = 10000
)
}
\arguments{
\item{postgres_keys}{A list of credentials for the production database (required if \code{con = NULL} in server mode).
Required fields: \code{password}, \code{user}, \code{dbname}, \code{host}, \code{port}.}

\item{ssl_cert_path}{Path to the SSL certificate file for the database connection.}

\item{needed_tables}{A character vector of fully qualified table names in the format \code{"schema.table"}, e.g.,
\code{c("raw.crm_leads", "analytics.dashboard_metrics")}. If \code{NULL}, no synchronization is performed.}

\item{con}{An existing PostgreSQL connection object. If \code{NULL}, a new connection will be established.}

\item{update_local_tables}{Logical. If \code{TRUE}, all specified tables will be pulled from production.
If \code{FALSE} (default), only missing local tables will be downloaded.}

\item{ssh_key_path}{Path to the SSH key used to access the production database.}

\item{local_dbname, }{local_host, local_port, local_user, local_pw Parameters for configuring the local database connection.}

\item{load_in_memory}{Logical. Currently not used. Default is \code{FALSE}.}

\item{local_password_is_product}{Logical. Indicates whether the local password is the same as the production password
(only relevant for SSH-based data transfer).}

\item{chunk_size}{Integer. Number of rows to process at once when downloading large tables. Default is \code{10000}.
Smaller values use less memory but may be slower. Increase for faster transfers if memory allows.}
}
\value{
Returns a connection object to the local database if a new connection is established.
If a connection is passed in via \code{con}, it is returned unchanged.
}
\description{
This function establishes a connection to a local PostgreSQL database. Optionally, it can load specified tables
from the production environmentâ€”either always or only if they are not yet available locally.
}
\details{
The function can be used interactively (e.g., in RStudio) or in a server context.
\itemize{
\item In interactive mode, if no connection is passed, the user will be prompted to enter the local database password.
\item In server mode, a connection will only be established if \code{con} is \code{NULL}.
\item If tables are specified, the function checks whether they already exist locally (unless \code{update_local_tables = TRUE}).
\item Missing or outdated tables will be automatically synchronized from the production environment.
}
}
\examples{
\dontrun{
  # Connect and only download missing tables
  con <- postgres_connect(
    needed_tables = c("raw.crm_leads", "analytics.dashboard_metrics"),
    update_local_tables = FALSE
  )

  # For very large tables, reduce chunk size to use less memory
  con <- postgres_connect(
    needed_tables = c("raw.large_table"),
    chunk_size = 10000  # Process 10k rows at a time
  )
}

}
