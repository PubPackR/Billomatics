% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/database_functions.R
\name{postgres_connect_and_update_local}
\alias{postgres_connect_and_update_local}
\title{Verbindung zur PostgreSQL-Datenbank herstellen und bei Bedarf lokale Tabellen aktualisieren}
\usage{
postgres_connect_and_update_local(
  tables = NULL,
  conn = NULL,
  keys_postgres = NULL,
  update_available_tables = FALSE,
  ssh_key_path = NULL
)
}
\arguments{
\item{tables}{Ein Character-Vektor mit vollqualifizierten Tabellennamen im Format \code{"schema.tabelle"}, z. B.
\code{c("raw.crm_leads", "analytics.dashboard_metrics")}. Wenn keine Tabellen angegeben werden,
wird keine Synchronisation durchgeführt.}

\item{conn}{Ein bestehendes PostgreSQL-Connection-Objekt. Wenn \code{NULL}, wird eine neue Verbindung aufgebaut.
Im interaktiven Modus wird das Passwort für den Produktnutzer abgefragt, wenn keine Verbindung übergeben wird.}

\item{keys_postgres}{Eine Liste mit Zugangsdaten zur Produktionsdatenbank (benötigt, wenn \code{conn = NULL}).
Die Liste muss folgende Einträge enthalten: \code{password}, \code{user}, \code{dbname}, \code{host}, \code{port}.}

\item{update_available_tables}{Logisch. Wenn \code{TRUE}, werden \strong{alle} angegebenen Tabellen vor dem Einlesen
aus der Produktion gezogen. Wenn \code{FALSE} (Standard), werden nur Tabellen gezogen, die lokal
noch \strong{nicht} existieren.}

\item{ssh_key_path}{Pfad zum SSH-Schlüssel für die Verbindung zur Produktionsumgebung (wird beim Ziehen der Daten benötigt).}
}
\value{
Gibt entweder das bestehende Connection-Objekt zurück (im Server-Modus) oder eine neue Verbindung,
wenn eine hergestellt wird. Wenn keine Tabellen angegeben sind, wird \code{NULL} zurückgegeben.
}
\description{
Diese Funktion stellt eine Verbindung zu einer PostgreSQL-Datenbank her. Wenn im interaktiven Modus keine bestehende
Verbindung übergeben wird, wird das Passwort für den Produktnutzer abgefragt und eine neue Verbindung aufgebaut.
Es können Tabellen aus der Produktionsumgebung synchronisiert werden, wenn sie in der lokalen Datenbank fehlen.
}
\details{
\itemize{
\item Im interaktiven Modus wird eine Verbindung zur lokalen PostgreSQL-Datenbank hergestellt und das Passwort für den Produktnutzer abgefragt.
\item Im Server-Modus wird nur eine Connection zurückgegeben, wenn keine übergebene Verbindung vorhanden ist.
\item Wenn \code{update_available_tables = FALSE}, wird geprüft, welche Tabellen lokal fehlen. Nur diese werden aus der Produktionsumgebung gezogen.
\item Wenn \code{update_available_tables = TRUE}, werden alle angegebenen Tabellen aus der Produktion synchronisiert.
\item Die Tabellen werden mithilfe der Funktion \code{postgres_pull_production_tables()} aus der Produktionsumgebung abgerufen.
}
}
\examples{
\dontrun{
  # Verbinde dich mit der lokalen DB und lade fehlende Tabellen
  conn <- postgres_connect_and_update_local(
    tables = c("raw.crm_leads", "analytics.dashboard_metrics"),
    update_available_tables = FALSE
  )
}

}
\seealso{
\code{\link[=postgres_connect]{postgres_connect()}}, \code{\link[=postgres_pull_production_tables]{postgres_pull_production_tables()}}
}
