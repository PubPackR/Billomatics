% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/database_functions.R
\name{collect_and_log}
\alias{collect_and_log}
\title{Collect Data and Log the Table Names}
\usage{
collect_and_log(tbl, con = get("con", envir = globalenv()))
}
\arguments{
\item{tbl}{Ein \code{dbplyr}-Lazy Query-Objekt, dessen Ergebnis abgefragt wird.}

\item{con}{Die Datenbankverbindung für das Logging. Standardmäßig wird \code{con} aus der globalen Umgebung gezogen.}
}
\value{
Das Ergebnis von \code{dplyr::collect(tbl)}, typischerweise ein Data Frame.
}
\description{
Executes a \code{dbplyr} query and logs the names of all involved database tables.
}
\details{
Die Funktion ermittelt Tabellen-Namen aus \code{tbl$lazy_query} über eine rekursive Suche.
Diese Namen werden in eine Protokolltabelle geschrieben.
Bei Fehlern wird dies ebenfalls protokolliert und der Fehler erneut geworfen.
}
\examples{
tbl <- dplyr::tbl(con, "some_table")
df <- collect_and_log(tbl)

}
