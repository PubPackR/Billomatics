% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/postgres_connect.R
\name{connect_with_retry}
\alias{connect_with_retry}
\title{Connect to PostgreSQL with Retry on Password Failure}
\usage{
connect_with_retry(
  postgres_keys,
  local_pw,
  local_host,
  local_port,
  local_user,
  local_dbname,
  ssl_cert_path
)
}
\arguments{
\item{postgres_keys}{List of PostgreSQL connection keys or credentials.}

\item{local_pw}{Character. The initial password to use for the connection attempt.}

\item{local_host}{Character. The database host.}

\item{local_port}{Integer or Character. The database port.}

\item{local_user}{Character. The database username.}

\item{local_dbname}{Character. The database name.}

\item{ssl_cert_path}{Character. Path to the SSL certificate (if required).}
}
\value{
A list with two elements:
\describe{
\item{connection}{The established database connection object.}
\item{local_pw}{The password that was successfully used for the connection.}
}
}
\description{
This internal helper function tries to establish a PostgreSQL connection using the provided credentials.
If the first attempt fails (e.g. wrong password), it prompts the user to re-enter the password
via a secure prompt (\code{getPass::getPass}) and retries once.
}
\examples{
\dontrun{
result <- connect_with_retry(postgres_keys, local_pw, local_host, local_port, local_user, local_dbname, ssl_cert_path)
con <- result$connection
local_pw <- result$local_pw
}
}
\seealso{
\code{\link[getPass]{getPass}}
}
\keyword{internal}
